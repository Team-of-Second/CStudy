# OSI(Open Systems Interconnection) 참조 모델
- 국제 표준화 기구인 ISO(International Standard Organization)가 확립한 개방된 데이터 통신 환경에 적합한 계층적 구현 모델
- 네트워크에 연결된 컴퓨터들이 데이터를 주고받으려면 서로 연동할 수 있게 표준화된 인터페이스를 지원해야한다. => 일반적으로 컴퓨터 네트워크에서는 계층 구조로 모듈화된 프로토콜을 사용

## 1. OSI 7계층 모델
- 연결된 두 호스트가 각각 7개 계층으로 구성된 모듈을 수행함으로써 데이터 송수신이 가능
전송 데이터는 *송신 호스트의 응용 계층에서* 시작해 하위 계층으로 순찬적으로 전달되어, 최종적으로 *물리 계층에서 수신 호스트에 전달*된다. 수신 호스트에서는 데이터를 상위 계층으로 순차적으로 이동시켜 응용 계층까지 보내준다.
- 데이터가 하위 계층으로 내려갈 때는 각 계층의 프로토콜에서 정의한 헤더 정보가 추가된다. => *물리 계층을 제외한 모든 계층*에서 헤더 정보가 추가되고 데이터를 수신하는 호스트에서는
상위 계층으로 올라가며 순차적으로 *헤더 정보를 제거하고 해석*
- 송신측( 응용(application Layer) -> 표현(Presentation Layer) -> 세션(Session Layer) -> 전송(Transport Layer) -> 네트워크(Network Layer) -> 데이터링크(Datalink Layer) -> 물리계층(Physical Layer)
- 수신측( 물리 -> 데이터링크 -> 네트워크 -> 전송 -> 세션 -> 표현 -> 응용계층)

### 1.1 용어정의
- 프로토콜 : 서로 다른 시스템 및 기기 간 데이터 교환을 원활히 하기 위한 표준화된 통신 규약
- Peer Process : 동일 계층에 위치한 통신 양단 (같은 프로토콜을 사용)
- Interface : 한 호스트에서 상하로 이웃하는 계층에 위치한 모듈 사이에는 '인터페이스'가 정의되어 두 계층 사이의 접근 방법을 제한
- *상위 계층에서는 하위 계층*의 인터페이스를 통해 하위 계층의 '서비스'를 이용할 수 있다. 

### 1.2 헤더 정보
- 프로토콜 스택의 제일 위에 위치한 일반 사용자는 전송 데이터가 있으면 이를 응용 계층에 보내 전송을 요청
- 응용 계층에서는 데이터에 자신의 프로토콜에서 정의한 헤더 정보를 추가해 표현 계층으로 전송 -> 데이터 링크까지 반복 -> 물리계층에서 수신측으로 실질적 데이터 전송
- 수신한 호스트에서는 송신 절차와 반대방향으로 헤더를 해석하고 제거하는 과정을 반복 -> 최상위 수신자는 원래 전송 데이터만 받는다. 
- 각 계층의 프로토콜은 데이터 송신 과정에서 발생하는 문제점을 해결 (흐름, 오류, 주소설정 등등)

### 1.3 중개 노드
- 송신 호스트에서 수신 호스트로 데이터를 전달하려면 중개 역할을 수행하는 중개 노드를 거친다. -> 데이터가 목적진까지 올바르게 전달되도록 경로 배정 기능을 수행 => 라우팅(Routing)

## 2. 계층별 기능
- 전송 계층은 통신 양단에 있는 프로세스 사이의 종단 연결을 제공 (프로세스와 프로세스 사이의 연결을 설정하여 데이터를 주고 받을 수 있게 해줌)
- 전송 계층 하위의 네트워크, 데이터링크, 물리 계층은 전송 계층의 연결을 설정하고 지원 하는 역할
- 전송 계층 상위의 세션, 표현, 응용 계층은 전송계층의 연결을 어떻게 활용할 것인지에 대해 다룬다. // OSI 7계층은 전송 계층을 기준으로 2부분으로 나뉨

### 2.1 물리 계층(Physical Layer)
- OSI 7계층의 제일 밑 계층으로 *전송 매체*의 물리적 인터페이스에 관한 사항
- *전송 매체에서는 개별 정보의 Bit 교환 문제*, 데이터의 전송 속도, 송수신 호스트 사이의 클록 동기화 방법, 물리적 연결 형태
- 하드웨어 시스템으로 구현, 2계층 이상의 프로토콜은 소프트웨어적으로 구현

### 2.2 데이터 링크 계층 (Data Link Layer)
- 물리 계층을 통해 전송되는 데이터의 물리적 전송 오류를 해결
- 상위의 네트워크 계층에 신뢰성 있는 패킷 전송을 보장해주어 전송 오류에 대한 부담 경감
- 데이터링크 계층에서 전송되는 데이터를 '프레임'(Frame) 이라고 부른다.
- 프레임 헤더에 표시되는 송수신 호스트 정보에는 LAN 카드에 내장된 송수신 호스트의 MAC주소가 기록 => 데이터 링크 계층은 다른 상위 계층처럼 송신 호스트와 수신 호스트 사이의 전송 속도 차이를 고려한 흐름 제어 기능을 지원

### 2.3 네트워크 계층 (Network Layer)
- 네트워크 계층은 송신 호스트가 전송한 데이터가 *어떤 경로를 통해* 수신 호스트에 전달되는지를 결정하는 *라우팅(Routing) 문제를 처리*
- 전달 경로 선택 => 2가지 방식 (Static, Dynamic)
- 전송 데이터 패킷 (Packet)
- 중개 과정에서 경로 서낵의 기준이 되는 호스트 주소가 필요
- 인터넷에서는 *IP 프로토콜이 네트워크 계층*의 기능을 수행 => 호스트의 IP 주소가 경로 선택에 중요한 기준
=> 인터넷에 연결된 호스트는 네트워크 계층의 주소(IP)와 데이터링크 계층의 주소(MAC(Media Access Control Address)) 주소를 모두 갖는다.
- 컴퓨터 네트워크를 이용해 전송되는 패킷이 지나치게 많으면 네트워크의 전송 속도가 떨어짐 -> 네트워크의 트래픽이 과도하게 증가하는 문제를 조절하는 혼잡제어 (Congestion Control) 기능

### 2.4 전송 계층 (Transport Layer)
- ***송신 프로세스와 수신 프로세스를 직접 연결하는 End-to-End 통신 기능 제공 ***

### 2.5 세션 계층 (Session Layer)
- 사용자에게 원격 파일 전송이나 원격 로그인 등과 같은 상위적 연결 개념인 세션 기능을 제공
- 토큰 제어, 동기 기능 제공

### 2.6 표현 계층(Presentation Layer)
- 5계층까지는 데이터 전송에 관한 내용, 표현 계층은 데이터의 의미(Semantic)와 표현 방법(Syntax)를 처리
- 통신 양단에서 서로 이해할 수 있는 **표준 방식으로 데이터를 코딩**하는 문제를 다룸 => 데이터를 암호화하는 기술도 표현 계층에서 다룬다.
- 데이터를 압축하는 기술도 표현 계층

### 2.7 응용 계층(Application Layer)
- 최상위 계층으로 응용 환경에서 공통으로 필요한 기능을 다룸
- FTP(File Transfer Protocol을 통한 파일 공유 서비스
- Telenet이 제공하는 CLI 환경















# TCP(Transmission Control Protocol) UDP(User Datagram Protocol)
TCP와 UDP는 OSI 표준모델과 TCP/IP 모델의 전송계층에서 사용되는 프로토콜

cf) 전송계층 : 송신자와 수신자를 연결하는 통신 서비스 제공 및 IP에 의해 전달된 패킷 오류 검사

```
ㅇ TCP와 UDP 모두 '포트 번호'를 이용하여 어떤 Application에 데이터를 전달 할지 식별
ㅇ 포트 번호는 0 ~ 65535 까지의 숫자
ㅇ 0 ~ 1023은 well-known port => 웹 서버나 메일 서버 
ㅇ 1024 ~ 49151은 registered port, 49152 ~ 65525는 dynamic port 서버가 클라이언트를 식별하기위해 사용

```
### TCP(Transmisson Control Protocol)
TCP는 연결 지향형 프로토콜로, 연결 지향형 프로토콜이란 클라이언트와 서버가 연결된 상태에서 데이터를 주고 받는 프로토콜을 의미

#### TCP 3-way-handshake 방식 (SYN, ACK)
![3-way-handshake](https://user-images.githubusercontent.com/86729396/166445231-d8981d9a-3b36-4c8e-a920-0a28c6db97ad.jpg)

1. Client에서 Server에 연결 요청을 하기위해 SYN 데이터를 보낸다.
2. Server에서 해당 포트는 LISTEN 상태에서 SYN 데이터를 받고 SYN_RCV로 상태가 변경된다.
3. 그리고 요청을 정상적으로 받았다는 대답(ACK)와 Client도 포트를 열어

클라이언트가 연결 요청(SYN)을 하고, 서버가 연결을 수락하면 모든 데이터는 고정된 선로를 따라 순차적으로 전달 된다. 이를 통해 호스트간 신뢰성 있는 데이터 전달과 흐름제어를 한다.

